@model Wkkim.Blog.Web.Models.ViewModels.HomeViewModel

@{
    ViewData["Title"] = "Home Page";
}
<div class="container col-xxl-8 px-0 py-2">
    <div class="m-0 py-0 border-0">
        <img src="./image/c-sharp-c.svg" width="50px"></img>
        <img src="./image/sql-database-sql-azure.svg" width="50px"></img>
        <img src="./image/python.svg" width="50px"></img>
        <img src="./image/artificial-intelligence.svg" width="50px"></img>
    </div>
    <div class="row align-items-center g-5 px-3 py-2">
        <div class="col-12 col-lg-15">
            <h1 class="display-5 fw-bold lh-1 mb-3">
                Adaptable Developer WoongKeol Kim
            </h1>
            <p class="lead">
                A developer capable of expanding my personal skills to meet diverse environments and requirements.
                Depending on the project's needs, Proficient in using various tools, including C#, SQL, DevExpress, and Python.
                <br/>
                Primary development areas are app development using C# (WinForm, WPF) and SQL, and also expanding expertise to include ASP.Net.
                <br />
                Quickly gained specialized knowledge across various industries,
                from defense software in South Korea to government project software and automation equipment software for electric vehicle battery inspection.
            </p>
        </div>

        <div class="col-12 col-lg-6">
            <img src="https://images.pexels.com/photos/196655/pexels-photo-196655.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Alternate Text"
                 class="d-block mx-lg-auto img-fluid" width="600" />

        </div>
    </div>
</div>

<form class="container">
    @if (Model != null && Model.Tags.Any())
    {
        <div class="row justify-content-start ">
            <H5>
                Select tags
            </H5>
        </div>

        <div class="row justify-content-start">
            <div class="col-6 d-flex mb-3">
                <div class="btn-group" role="group" aria-label="Basic checkbox toggle button group">
                    @foreach (var tag in Model.Tags)
                    {
                        <input type="checkbox" class="btn-check" id=@tag.Name data-tag-id="@tag.Id" autocomplete="off" checked onchange="updatePosts()" />
                        <label class="btn btn-outline-primary" for=@tag.Name>@tag.Name</label>
                    }
                </div>
            </div>
        </div>
    }
</form>

@if (Model != null && Model.BlogPosts.Any())
{
    <div class="container" id="posts">
    </div>
}

@section Scripts {

    <script type="text/javascript">
        function updatePosts() {
            var selectedTags = [];
            $('.btn-check:checked').each(function () {
                selectedTags.push($(this).data('tag-id'));
            });

            if (selectedTags.length > 0) {
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("PostsByTag", "Home")',
                    data: { tagIds: selectedTags },
                    traditional: true, // 배열을 전송하기 위해 필요
                    success: function (response) {
                        $('#posts').html(response);
                    },
                    error: function () {
                    }
                });
            } else {
                $('#posts').html(''); // 태그 선택이 해제되면 게시글 목록 초기화
            }
        }

        $(document).ready(function () {
            updatePosts(); // 페이지 로드 시 초기 게시글 표시
        });
    </script>


    <script>
        function fonctionTest(tN, val) {
            console.log(tN);
            console.log(val);
            $.ajax({
                type: "POST",
                url: '@Url.Action("ReceiveData", "Home")',  // 컨트롤러 메서드의 URL
                data: { tagIdStr: tN, isChecked: val },
                success: function (response) {
                    if (response.success) {
                        alert(response.message);
                    } else {
                    }
                },
                error: function () {
                    alert("An error occurred.");
                }
            });
        }
    </script>
}